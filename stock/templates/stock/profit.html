
{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}
{% block content %}


<!-- KANAN -->
<div class="main-panel">
    <div class="content-wrapper">     
        <div class="luar detail-page">
            <form method="GET" class="filter-bar">
                <div class="filtering">
                    <div>
                        {{ filter.form.non_field_errors }}
                        <div class="fieldWrapper">
                            {{ filter.form.purchase_month.errors }}
                            <label style='margin-left:10px; color:rgb(51, 51, 51);' for="{{ filter.form.purchase_month.id_for_label }}">Penghasilan Bulan : </label>
                            {{ filter.form.purchase_month|add_class:'filter-field btn'}}
                        </div>
                    </div>
                    <div>
                        {{ filter.form.non_field_errors }}
                        <div class="fieldWrapper">
                            {{ filter.form.purchase_year.errors }}
                            <label style='margin-left:20px; color:rgb(51, 51, 51);' for="{{ filter.form.purchase_year.id_for_label }}">Tahun : </label>
                            {{ filter.form.purchase_year|add_class:'filter-field btn'}}
                        </div>
                    </div>
                    <button class="btn btn-primary mt-2 mt-xl-0 btn-nico" style='align-content: center; margin-left:10px;' type="submit">Search</button>
                    <a class="btn btn-primary mt-2 mt-xl-0 btn-nico btn-merah kanan" href="{% url 'stock:earnings_year' %}">Year View</a>
                </div>
            </form>
        </div>    
        <div class="luar table-page">
            <div>
                <h1 class="center judul-tabel">{{ month }} {{ filter.data.purchase_year|safe }}</h1>
            </div>  
            <table>
                <tr>
                <th style="width: 50%;">Tanggal</th>
                <th style="width: 50%;">Total Penjualan</th>
                </tr>
                {% for transaksi in filter.qs %}
                    <tr>
                        <td style="width: 50%;">{{transaksi.date|date:"d F"}}</td>
                        <td style="width: 50%;">{{transaksi.total_sales}}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        <div class="luar table-page"  style=" margin: 20px 10px 20px 10px;">
            <table>
                <tr>
                <th style="width: 50%;">Total Penjualan</th>
                {% for transaksi in month_earning %}
                <th style="width: 50%;">{{ transaksi.total_sales }}</th>
                {% endfor %}
                </tr>
                <tr>
                <th style="width: 50%;">Pendapatan Bersih</th>
                {% for transaksi in month_earning %}
                <th style="width: 50%;">{{ transaksi.total_margin }}</th>
                {% endfor %}
                </tr>
            </table>
        </div>
    </div>

    
 

    
   
{% endblock content %}